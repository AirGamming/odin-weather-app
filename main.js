(()=>{"use strict";function e(){var e=JSON.parse(localStorage.getItem("config")),t=e.key,n=e.city,a=e.mesureSystem,c=document.createElement("div"),i=document.createElement("div"),r=document.createElement("h2"),s=document.createElement("button"),d=document.createElement("form"),o=(document.createElement("label"),document.createElement("input")),m=(document.createElement("label"),document.createElement("input")),l=(document.createElement("label"),document.createElement("select")),u=document.createElement("option"),p=document.createElement("option"),v=document.createElement("button");c.classList.add("popup-background"),i.classList.add("popup"),r.classList.add("popup-title"),r.innerHTML="Settings",s.classList.add("popup-close"),s.innerHTML="X",s.addEventListener("click",(function(){c.remove()})),d.classList.add("popup-form"),o.classList.add("popup-form-key"),o.setAttribute("type","text"),o.setAttribute("placeholder","API key"),o.setAttribute("value",t),m.classList.add("popup-form-city"),m.setAttribute("type","text"),m.setAttribute("placeholder","City"),m.setAttribute("value",n),l.classList.add("popup-form-mesure-system"),l.setAttribute("name","mesure-system"),u.classList.add("popup-form-mesure-system-metric"),u.setAttribute("value","metric"),u.innerHTML="Metric",p.classList.add("popup-form-mesure-system-imperial"),p.setAttribute("value","imperial"),p.innerHTML="Imperial",l.appendChild(u),l.appendChild(p),l.value=a,v.classList.add("popup-form-submit"),v.setAttribute("type","submit"),v.innerHTML="Save",d.append(o,l,m,v),i.append(r,s,d),c.appendChild(i),document.body.appendChild(c),d.addEventListener("submit",(function(e){var t={key:o.value,city:m.value,mesureSystem:l.value};console.log(t),t=JSON.stringify(t),localStorage.setItem("config",t),c.remove(),document.location.reload()}))}var t=JSON.parse(function(){var e=localStorage.getItem("config");if(null===e){var t={key:"",city:"",mesureSystem:"metric"};t=JSON.stringify(t),localStorage.setItem("config",t)}return e}());console.log(t);var n=t.key,a=t.city,c=t.mesureSystem,i="https://api.openweathermap.org/data/2.5/weather?q=".concat(a,"&units=").concat(c,"&appid=").concat(n);fetch(i).then((function(e){return e.json()})).then((function(t){return function(t){r.innerHTML="";var n=document.createElement("div");n.classList.add("container");var a=document.createElement("div");a.classList.add("city"),a.innerHTML="".concat(t.name,", ").concat(t.sys.country);var i=document.createElement("div");i.classList.add("temp"),"metric"===c?i.innerHTML="".concat(Math.round(t.main.temp),"°C"):"imperial"===c&&(i.innerHTML="".concat(Math.round(t.main.temp),"°F"));var s=document.createElement("div");s.classList.add("feels-like"),s.innerHTML="Feels like ".concat(Math.round(t.main.feels_like),"°C");var d=document.createElement("div");d.classList.add("humidity"),d.innerHTML="Humidity ".concat(t.main.humidity,"%");var o=document.createElement("div");o.classList.add("wind"),o.innerHTML="Wind ".concat(t.wind.speed," m/s");var m=document.createElement("div");m.classList.add("weather"),m.innerHTML="".concat(t.weather[0].description);var l=document.createElement("img");l.classList.add("weather-icon"),l.src="https://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png");var u=new Date(1e3*t.dt),p=u.getHours(),v=u.getMinutes(),L=document.createElement("div");L.classList.add("time"),L.innerHTML="".concat(p,":").concat(v);var y=document.createElement("button");y.classList.add("btn"),y.innerHTML="Config",y.addEventListener("click",(function(){return e()})),[L,l,m,o,d,s,i,a,y].forEach((function(e){e.classList.add("info")})),r.appendChild(n),n.append(L,l,m,o,d,s,i,a,y)}(t)})).catch((function(t){console.log("Error: ".concat(t.message));var n=document.createElement("button");n.classList.add("btn"),n.innerHTML="Config",n.style.padding="10px",n.addEventListener("click",(function(){return e()})),document.body.appendChild(n)}));var r=document.createElement("main");r.classList.add("weather"),document.body.appendChild(r);var s=document.createElement("div");s.classList.add("ring"),r.appendChild(s)})();